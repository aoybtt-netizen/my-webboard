<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GedGo! - Profile & Verification</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/all.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root { --primary: #11998e; --secondary: #38ef7d; --dark: #2c3e50; --danger: #e74c3c; }
        body { font-family: 'Kanit', sans-serif; background: #f8fafc; margin: 0; padding: 0; }
        
        /* Header ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÉ‡∏´‡∏°‡πà */
        .header { 
            background: linear-gradient(135deg, var(--primary), var(--secondary)); 
            color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center;
            border-radius: 0 0 20px 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header a { color: white; text-decoration: none; font-size: 0.9em; display: flex; align-items: center; gap: 5px; }
        
        .container { padding: 15px; max-width: 450px; margin: 0 auto; }
        
        .profile-main { background: white; border-radius: 20px; padding: 20px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .avatar { font-size: 60px; }
        .username { font-size: 1.3em; font-weight: bold; color: var(--dark); margin: 5px 0; }

        .icon-stats { display: flex; justify-content: center; gap: 30px; margin: 15px 0; padding: 10px; border-top: 1px solid #f0f0f0; }
        .stat-item i { font-size: 1.2em; color: var(--primary); display: block; margin-bottom: 5px; }
        .stat-item span { font-weight: bold; }
        .stat-label { font-size: 0.7em; color: #999; display: block; }

        .wallet-bar { 
            background: var(--dark); color: white; padding: 12px; border-radius: 12px; 
            display: flex; justify-content: space-between; align-items: center;
        }
        
        /* Menu List */
        .menu-list { margin-top: 20px; }
        .menu-item { 
            display: flex; align-items: center; padding: 14px 15px; background: white; 
            margin-bottom: 10px; border-radius: 12px; text-decoration: none; color: #444; 
            border: 1px solid #f0f0f0; font-size: 0.95em; cursor: pointer;
        }
        .menu-item i { width: 25px; color: var(--primary); font-size: 1.1em; }
        .verify-btn { background: #fff9e6; border: 1px solid #f1c40f; }
        .verify-btn i { color: #f1c40f; }

        /* Modal ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; overflow-y: auto; }
        .modal-content { background: white; width: 90%; max-width: 400px; margin: 20px auto; border-radius: 20px; padding: 20px; }
        .upload-grid { display: grid; grid-template-columns: 1fr; gap: 10px; margin: 15px 0; }
        .upload-box { border: 2px dashed #ccc; padding: 15px; text-align: center; border-radius: 10px; cursor: pointer; position: relative; }
        .upload-box i { font-size: 20px; color: #999; }
        .upload-box p { font-size: 10px; margin: 5px 0 0; }
        .upload-box input { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }

        .proximity-alert { 
            background: #fff5f5; border: 1px solid #feb2b2; color: #c53030; 
            padding: 10px; border-radius: 10px; font-size: 0.8em; margin-top: 15px; text-align: center;
        }
        .btn-submit { 
            width: 100%; padding: 12px; background: #ccc; color: white; border: none; 
            border-radius: 10px; font-weight: bold; margin-top: 15px; cursor: not-allowed; 
        }
        .btn-active { background: var(--primary); cursor: pointer; }
		
		
		
	/* Sidebar Styles */
.sidebar {
    position: fixed;
    top: 0;
    left: -280px; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢ */
    width: 280px;
    height: 100%;
    background: white;
    box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    z-index: 1100;
    transition: 0.3s ease;
    display: flex;
    flex-direction: column;
}

.sidebar.active {
    left: 0; /* ‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ */
}

.sidebar-header {
    padding: 20px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    text-align: center;
}

.sidebar-content {
    padding: 15px;
    flex: 1;
    overflow-y: auto;
}

/* Overlay ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π */
.sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    display: none;
    z-index: 1050;
}

.sidebar-overlay.active {
    display: block;
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ô Header */
.menu-trigger {
    cursor: pointer;
    font-size: 1.2em;
    margin-right: 10px;
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô sidebar ‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô */
.sidebar .menu-item {
    margin-bottom: 8px;
    border: none;
    border-bottom: 1px solid #f0f0f0;
    border-radius: 0;
}

    </style>
</head>
<body>

<div class="header">
    <div style="display: flex; align-items: center;">
        <i class="fas fa-bars menu-trigger" onclick="toggleSidebar()"></i>
    </div>
    <span style="font-weight: bold;">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</span>
    <a href="index.html"><i class="fas fa-home"></i> ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
</div>

<div class="container">
    <div class="profile-main">
        <div class="avatar">üë§</div>
        <p class="username" id="display-name">Guest</p>
        
        <div class="icon-stats">
            <div class="stat-item"><i class="fas fa-clipboard-list"></i><span id="count-post">0</span><span class="stat-label"></span></div>
            <div class="stat-item"><i class="fas fa-check-double"></i><span id="count-job">0</span><span class="stat-label"></span></div>
            <div class="stat-item"><i class="fas fa-star" style="color: #f1c40f;"></i><span id="count-rating">5.0</span><span class="stat-label"></span></div>
        </div>

        <div class="wallet-bar" style="cursor: default;">
    <div style="display: flex; align-items: center; gap: 8px;">
        <i class="fas fa-wallet" style="font-size: 0.9em; opacity: 0.8;"></i>
        <span style="font-size: 0.8em; opacity: 0.8;">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô:</span>
        <button onclick="openRequestTopup()" 
                style="background: #38ef7d; border: none; color: #114b46; width: 24px; height: 24px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; transition: 0.2s;"
                onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
            <i class="fas fa-plus"></i>
        </button>
    </div>
    <div style="text-align: right;">
        <span id="display-balance-usd" style="font-weight: bold; font-size: 1.1em;">0.00 USD</span>
        <span id="display-balance-thb" style="font-size: 0.7em; opacity: 0.7; margin-left: 5px;">(0.00 THB)</span>
    </div>
</div>


	<div id="zone-info-box" style="margin-top: 15px; padding: 12px; background: #fff; border: 1px solid #eee; border-radius: 15px; text-align: left; display: flex; align-items: center; gap: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.02);">
    <div style="background: #e8f5e9; color: #11998e; width: 45px; height: 45px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.3em;">
        <i class="fas fa-map-marker-alt"></i>
    </div>
    <div style="flex: 1;">
        <div style="font-size: 0.7em; color: #999; text-transform: uppercase; letter-spacing: 0.5px;">‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</div>
        <div id="display-zone-name" style="font-weight: bold; color: var(--dark); font-size: 0.95em;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏ã‡∏ô...</div>
        <div style="font-size: 0.75em; color: #666; margin-top: 2px;">
            <i class="fas fa-user-shield" style="font-size: 0.9em; color: #f1c40f;"></i> ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô: 
            <span id="display-zone-admin" style="font-weight: bold; color: var(--primary);">‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</span>
        </div>
    </div>
</div>



<div id="topup-request-modal" class="modal">
    <div class="modal-content" style="max-width: 320px; text-align: center;">
        <div style="font-size: 40px; color: #f1c40f; margin-bottom: 10px;"><i class="fas fa-hand-holding-usd"></i></div>
        <h3 style="margin: 0 0 10px;">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h3>
        <p style="font-size: 0.8em; color: #666; margin-bottom: 15px;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (USD) ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏°</p>
        
        <div style="position: relative; margin-bottom: 20px;">
            <input type="number" id="request-amount-input" placeholder="0.00" 
                   style="width: 100%; padding: 12px 15px; border: 2px solid #eee; border-radius: 12px; font-size: 1.5em; text-align: center; box-sizing: border-box; outline: none; font-weight: bold; color: #2c3e50;">
            <span style="position: absolute; right: 15px; top: 15px; font-weight: bold; color: #999;">USD</span>
        </div>

        <div style="display: flex; gap: 10px;">
            <button onclick="closeRequestTopup()" style="flex: 1; padding: 12px; background: #eee; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; color: #666;">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            <button onclick="submitTopupRequest()" style="flex: 1; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold;">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠</button>
        </div>
    </div>
</div>

        <div class="menu-list">
            <div class="menu-item verify-btn" onclick="openKYC()">
                <i class="fas fa-id-card"></i>
                <div style="text-align: left; flex: 1;">
                    <div style="font-weight: bold;">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô (KYC)</div>
                    <div style="font-size: 0.7em; color: #b58900;">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô</div>
                </div>
                <i class="fas fa-chevron-right" style="font-size: 0.8em; color: #ccc;"></i>
            </div>

            <a href="#" class="menu-item"><i class="fas fa-envelope"></i> ‡∏≠‡∏µ‡πÄ‡∏°‡∏•: <span id="display-email" style="margin-left:5px; color:#999;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏</span></a>
            <a href="#" class="menu-item"><i class="fas fa-history"></i> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</a>
            <a href="javascript:logout()" class="menu-item" style="color: var(--danger); border-color: #ffeaea;"><i class="fas fa-power-off"></i> ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
        </div>
    </div>
</div>

<div id="kyc-modal" class="modal">
    <div class="modal-content" style="position: relative;">
        <div onclick="closeKYC()" style="position: absolute; right: 20px; top: 20px; cursor: pointer; color: #999; font-size: 1.5em;">
            <i class="fas fa-times-circle"></i>
        </div>

        <div style="text-align: left; margin-bottom: 20px;">
            <h3 style="margin: 0; color: var(--dark);">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h3>
            <p style="font-size: 0.8em; color: #666; margin-top: 5px;">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</p>
        </div>
        
        <div style="text-align: left;">
            <label style="font-size: 0.85em; font-weight: bold;">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• (‡∏ï‡∏≤‡∏°‡∏ö‡∏±‡∏ï‡∏£):</label>
            <input type="text" id="full-name" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•..." style="width: 100%; padding: 12px; margin: 5px 0 15px; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box;">

            <label style="font-size: 0.85em; font-weight: bold;">‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô:</label>
            <input type="number" id="id-number" placeholder="‡πÄ‡∏•‡∏Ç 13 ‡∏´‡∏•‡∏±‡∏Å..." style="width: 100%; padding: 12px; margin: 5px 0 15px; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box;">

            <label style="font-size: 0.85em; font-weight: bold;">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠:</label>
            <input type="tel" id="phone-number" placeholder="08x-xxx-xxxx" style="width: 100%; padding: 12px; margin: 5px 0 15px; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box;">
        </div>

        <label style="font-size: 0.85em; font-weight: bold; display: block; text-align: left;">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢ (3 ‡∏£‡∏π‡∏õ):</label>
        <div class="upload-grid">
            <div class="upload-box">
                <i class="fas fa-id-card"></i>
                <p>‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</p>
                <input type="file" accept="image/*" onchange="previewImg(this)">
            </div>
            <div class="upload-box">
                <i class="fas fa-barcode"></i>
                <p>‡∏´‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</p>
                <input type="file" accept="image/*" onchange="previewImg(this)">
            </div>
            <div class="upload-box">
                <i class="fas fa-user-tag"></i>
                <p>‡∏£‡∏π‡∏õ‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏∑‡∏≠‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏ö‡∏±‡∏ï‡∏£</p>
                <input type="file" accept="image/*" onchange="previewImg(this)">
            </div>
        </div>

        <div class="proximity-alert">
            <i class="fas fa-map-marker-alt"></i><br>
            <b>‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:</b> ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô <b>20 ‡πÄ‡∏°‡∏ï‡∏£</b> ‡∏õ‡∏∏‡πà‡∏°‡∏™‡πà‡∏á‡∏à‡∏∂‡∏á‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
        </div>

        <button id="btn-kyc-submit" class="btn-submit" disabled>
            <i class="fas fa-lock"></i> ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á...)
        </button>
        
        <button onclick="closeKYC()" style="width: 100%; padding: 10px; background: none; border: none; color: #999; margin-top: 10px; cursor: pointer; font-size: 0.9em;">
            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á
        </button>
    </div>
</div>

<script>

	function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    
    sidebar.classList.toggle('active');
    overlay.classList.toggle('active');
}

    function openKYC() { document.getElementById('kyc-modal').style.display = 'block'; }
    function closeKYC() { document.getElementById('kyc-modal').style.display = 'none'; }

    // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏à‡∏∞‡πÉ‡∏ä‡πâ Geolocation API)
    function checkProximity() {
        const isNear = false; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô true ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ 20m
        const btn = document.getElementById('btn-kyc-submit');
        if(isNear) {
            btn.disabled = false;
            btn.classList.add('btn-active');
            btn.innerText = "‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô";
        }
    }

    window.onload = async () => {
    const myName = localStorage.getItem('myUsername');
    if (!myName) {
        window.location.href = 'index.html';
        return;
    }

    document.getElementById('display-name').innerText = myName;

    try {
        const savedLoc = localStorage.getItem('userPrimaryLocation');
        let locationParam = '';
        if (savedLoc) locationParam = `&location=${encodeURIComponent(savedLoc)}`;

        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á
        const res = await fetch(`/api/profile-details?username=${myName}${locationParam}`);
        const data = await res.json();

        if (data.error) throw new Error(data.error);

        // 1. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ (‡πÉ‡∏ä‡πâ || 0 ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Error .toFixed)
        document.getElementById('count-post').innerText = data.totalPosts || 0;
        document.getElementById('count-job').innerText = data.completedJobs || 0;
		document.getElementById('count-rating').innerText = data.rating || 0;
        
        const usdAmount = data.coins || 0;
        document.getElementById('display-balance-usd').innerText = `${usdAmount.toFixed(2)} USD`;
        
        // 2. ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏ã‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô
        document.getElementById('display-zone-name').innerText = data.zoneName;
        document.getElementById('display-zone-admin').innerText = data.zoneOwner;

        // 3. ‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•
        document.getElementById('display-email').innerText = data.email;

    } catch (err) {
        console.error("Load Profile Error:", err);
        document.getElementById('display-zone-name').innerText = "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô";
    }

    checkProximity();
};


    function logout() {
        if(confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?')) {
            localStorage.clear();
            window.location.href = 'index.html';
        }
    }
	
	
	// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏û‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ (‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ)
function previewImg(input) {
    if (input.files && input.files[0]) {
        const box = input.parentElement;
        box.style.borderColor = "#11998e";
        box.style.background = "#e8f5e9";
        box.querySelector('i').style.color = "#11998e";
        box.querySelector('p').innerText = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡πâ‡∏ß ‚úÖ";
    }
}

// ‡∏Ç‡∏¢‡∏≤‡∏¢ Logic ‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡∏à‡∏≥‡∏•‡∏≠‡∏á)
function updateKycStatus(isNear) {
    const btn = document.getElementById('btn-kyc-submit');
    if(isNear) {
        btn.disabled = false;
        btn.classList.add('btn-active');
        btn.innerHTML = '<i class="fas fa-paper-plane"></i> ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô';
    } else {
        btn.disabled = true;
        btn.classList.remove('btn-active');
        btn.innerHTML = '<i class="fas fa-lock"></i> ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á...)';
    }
}


// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î Modal ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô
function openRequestTopup() {
    document.getElementById('topup-request-modal').style.display = 'block';
    document.getElementById('request-amount-input').focus();
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏¥‡∏î Modal
function closeRequestTopup() {
    document.getElementById('topup-request-modal').style.display = 'none';
    document.getElementById('request-amount-input').value = '';
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠
async function submitTopupRequest() {
    const amount = document.getElementById('request-amount-input').value;
    const username = localStorage.getItem('myUsername');

    if (!amount || amount <= 0) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        return;
    }

    // ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏¢‡∏¥‡∏á API ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏•‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    console.log(`‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô: ${amount} USD ‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: ${username}`);
    
    // ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)
    alert(`‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${amount} USD ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! \n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô`);
    
    closeRequestTopup();
}


</script>

</body>
</html>