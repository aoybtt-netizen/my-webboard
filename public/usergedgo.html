<!DOCTYPE html>
<html lang="th">
<head>
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="apple-mobile-web-app-title" content="GedGo">
	<meta name="mobile-web-app-capable" content="yes">
	
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>GedGo! - Profile & Verification</title>
	<script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/all.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script src="https://accounts.google.com/gsi/client" async defer></script>
	
    <style>
        :root { --primary: #11998e; --secondary: #38ef7d; --dark: #2c3e50; --danger: #e74c3c; }
        body { font-family: 'Kanit', sans-serif; background: #f8fafc; margin: 0; padding: 0; }
        
        /* Header ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÉ‡∏´‡∏°‡πà */
        .header { 
            background: linear-gradient(135deg, var(--primary), var(--secondary)); 
            color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center;
            border-radius: 0 0 20px 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header a { color: white; text-decoration: none; font-size: 0.9em; display: flex; align-items: center; gap: 5px; }
        
        .container { padding: 15px; max-width: 450px; margin: 0 auto; }
        
        .profile-main { background: white; border-radius: 20px; padding: 20px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .avatar { font-size: 60px; }
        .username { font-size: 1.3em; font-weight: bold; color: var(--dark); margin: 5px 0; }

        .icon-stats { display: flex; justify-content: center; gap: 30px; margin: 15px 0; padding: 10px; border-top: 1px solid #f0f0f0; }
        .stat-item i { font-size: 1.0em; color: var(--primary); display: block; margin-bottom: 5px; }
        .stat-item span { font-weight: bold; }
        .stat-label { font-size: 0.7em; color: #999; display: block; }

        .wallet-bar { 
            background: var(--dark); color: white; padding: 12px; border-radius: 12px; 
            display: flex; justify-content: space-between; align-items: center;
        }
        
        /* Menu List */
        .menu-list { margin-top: 20px; }
        .menu-item { 
            display: flex; align-items: center; padding: 14px 15px; background: white; 
            margin-bottom: 10px; border-radius: 12px; text-decoration: none; color: #444; 
            border: 1px solid #f0f0f0; font-size: 0.95em; cursor: pointer;
        }
        .menu-item i { width: 25px; color: var(--primary); font-size: 1.1em; }
        .verify-btn { background: #fff9e6; border: 1px solid #f1c40f; }
        .verify-btn i { color: #f1c40f; }

        /* Modal ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; overflow-y: auto; }
        .modal-content { background: white; width: 90%; max-width: 400px; margin: 20px auto; border-radius: 20px; padding: 20px; }
        .upload-grid { display: grid; grid-template-columns: 1fr; gap: 10px; margin: 15px 0; }
        .upload-box { border: 2px dashed #ccc; padding: 15px; text-align: center; border-radius: 10px; cursor: pointer; position: relative; }
        .upload-box i { font-size: 20px; color: #999; }
        .upload-box p { font-size: 10px; margin: 5px 0 0; }
        .upload-box input { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }

        .proximity-alert { 
            background: #fff5f5; border: 1px solid #feb2b2; color: #c53030; 
            padding: 10px; border-radius: 10px; font-size: 0.8em; margin-top: 15px; text-align: center;
        }
        .btn-submit { 
            width: 100%; padding: 12px; background: #ccc; color: white; border: none; 
            border-radius: 10px; font-weight: bold; margin-top: 15px; cursor: not-allowed; 
        }
        .btn-active { background: var(--primary); cursor: pointer; }
		
		
		
	/* Sidebar Styles */
.sidebar {
    position: fixed;
    top: 0;
    left: -280px; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢ */
    width: 280px;
    height: 100%;
    background: white;
    box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    z-index: 1100;
    transition: 0.3s ease;
    display: flex;
    flex-direction: column;
}

.sidebar.active {
    left: 0; /* ‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ */
}

.sidebar-header {
    padding: 20px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    text-align: center;
}

.sidebar-content {
    padding: 15px;
    flex: 1;
    overflow-y: auto;
}

/* Overlay ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π */
.sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    display: none;
    z-index: 1050;
}

.sidebar-overlay.active {
    display: block;
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏ô Header */
.menu-trigger {
    cursor: pointer;
    font-size: 1.2em;
    margin-right: 10px;
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô sidebar ‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô */
.sidebar .menu-item {
    margin-bottom: 8px;
    border: none;
    border-bottom: 1px solid #f0f0f0;
    border-radius: 0;
}




/* --- ‡πÅ‡∏ú‡πà‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π (Overlay) --- */
.sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1100;
    opacity: 0;
    visibility: hidden;
    transition: 0.3s;
    backdrop-filter: blur(2px);
}
.sidebar-overlay.active {
    opacity: 1;
    visibility: visible;
}

/* --- ‡∏ï‡∏±‡∏ß‡πÅ‡∏ñ‡∏ö‡πÄ‡∏°‡∏ô‡∏π (Sidebar) --- */
.sidebar {
    position: fixed;
    top: 0;
    left: -280px; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏ù‡∏±‡πà‡∏á‡∏ã‡πâ‡∏≤‡∏¢ */
    width: 260px;
    height: 100%;
    background: white;
    z-index: 1200;
    transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
}
.sidebar.active {
    left: 0; /* ‡∏™‡πÑ‡∏•‡∏î‡πå‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ */
}

/* ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ Sidebar */
.sidebar-header {
    padding: 30px 20px;
    background: var(--dark);
    color: white;
    text-align: center;
}

/* ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π */
.sidebar-menu {
    flex: 1;
    padding: 15px 0;
}
.nav-item {
    padding: 15px 25px;
    display: flex;
    align-items: center;
    gap: 15px;
    color: #444;
    text-decoration: none;
    cursor: pointer;
    transition: 0.2s;
    border-left: 4px solid transparent;
}
.nav-item:hover {
    background: #f0fdf4;
    color: var(--primary);
    border-left-color: var(--primary);
}
.nav-item i {
    width: 20px;
    text-align: center;
}




/* --- KYC Modal Styles --- */
.modal {
    display: none; position: fixed; z-index: 2000;
    left: 0; top: 0; width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
}
.modal-content {
    background-color: #fff; margin: 0; width: 100%; height: 100%;
    padding: 30px; box-sizing: border-box; overflow-y: auto;
    animation: slideUp 0.3s ease-out;
}
@keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

.upload-grid { display: flex; gap: 15px; margin: 15px 0; }
.upload-box {
    flex: 1; border: 2px dashed #ddd; border-radius: 15px;
    padding: 20px; text-align: center; color: #999;
    position: relative; transition: 0.3s;
}
.upload-box:hover { border-color: var(--primary); color: var(--primary); }
.upload-box input { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }
.upload-box i { font-size: 2em; margin-bottom: 10px; }

.proximity-alert {
    background: #fff8e1; border: 1px solid #ffe082;
    padding: 15px; border-radius: 12px; color: #856404;
    font-size: 0.9em; margin: 20px 0; text-align: center;
}
.btn-submit {
    width: 100%; padding: 15px; border: none; border-radius: 12px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white; font-weight: bold; font-size: 1.1em; cursor: pointer;
}
.btn-submit:disabled { background: #ccc; cursor: not-allowed; }



.kyc-label {
    font-size: 0.85em; 
    font-weight: bold; 
    color: #444; 
    display: block; 
    margin-top: 10px;
}
.kyc-input {
    width: 100%; 
    padding: 12px; 
    margin: 5px 0 10px; 
    border: 1px solid #ddd; 
    border-radius: 10px; 
    box-sizing: border-box;
    font-family: 'Kanit', sans-serif;
}
.kyc-input:focus { border-color: var(--primary); }
.kyc-input:disabled { background: #f1f5f9; color: #64748b; cursor: not-allowed; }

.upload-box {
    position: relative;
    width: 100%;
    border-radius: 15px;
    transition: all 0.3s ease;
    background-repeat: no-repeat;
}
.swal2-container {
    z-index: 100000 !important;
}




.avatar-wrapper {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    overflow: hidden;
    position: relative;
    margin: 0 auto 15px;
    border: 3px solid var(--primary);
    background: #f1f5f9; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏≠‡πà‡∏≠‡∏ô‡πÜ */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}
.avatar-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.avatar-overlay {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: rgba(0, 0, 0, 0.5);
    color: white;
    font-size: 12px;
    padding: 4px 0;
    text-align: center;
    transition: 0.3s;
    opacity: 0; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô */
}

.avatar-placeholder {
    font-size: 50px; /* ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô üë§ */
    position: absolute;
    z-index: 1;
}

#main-avatar-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2; /* ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô */
    transition: opacity 0.3s;
}
#main-avatar-img[src=""], 
#main-avatar-img:not([src]) {
    opacity: 0;
}






    </style>
</head>
<body>

<div class="header">
    <div style="display: flex; align-items: center;">
        <i class="fas fa-bars menu-trigger" onclick="toggleSidebar()"></i>
    </div>
    <span style="font-weight: bold;">Profile</span>
    <a href="index.html"><i class="fas fa-home"></i> Home</a>
</div>

<div class="profile-main">
    <div class="avatar-wrapper" onclick="document.getElementById('avatar-input').click()">
    <div class="avatar-placeholder">üë§</div>
    
    <img id="main-avatar-img" src="" alt="" onerror="this.style.opacity='0'">
    
    <div class="avatar-overlay">
        <i class="fas fa-camera"></i>
    </div>
</div>
    
    <input type="file" id="avatar-input" accept="image/*" style="display: none;" onchange="handleAvatarUpload(this)">
    
    <p class="username" id="display-name">Guest</p>
        
        <div class="icon-stats">
            <div class="stat-item"><i class="fas fa-clipboard-list"></i><span id="count-post"> 0</span><span class="stat-label"></span></div>
            <div class="stat-item"><i class="fas fa-check-double"></i><span id="count-job"> 0</span><span class="stat-label"></span></div>
            <div class="stat-item"><i class="fas fa-star" style="color: #f1c40f;"></i><span id="count-rating"> 5.0</span><span class="stat-label"></span></div>
        </div>

        <div class="wallet-bar" style="cursor: default;">
    <div style="display: flex; align-items: center; gap: 8px;">
        <i class="fas fa-wallet" style="font-size: 0.9em; opacity: 0.8;"></i>
        <span style="font-size: 0.8em; opacity: 0.8;">Balance:</span>
        <button onclick="window.location.href='userTopupGedgo.html'" 
                style="background: #38ef7d; border: none; color: #114b46; width: 24px; height: 24px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; transition: 0.2s;"
                onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
            <i class="fas fa-plus"></i>
        </button>
    </div>
    <div style="text-align: right;">
        <span id="display-balance-usd" style="font-weight: bold; font-size: 1.1em;">0.00 USD</span>
    </div>
</div>


	<div id="zone-info-box" style="margin-top: 15px; padding: 12px; background: #fff; border: 1px solid #eee; border-radius: 15px; text-align: left; display: flex; align-items: center; gap: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.02);">
    <div style="background: #e8f5e9; color: #11998e; width: 45px; height: 45px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.3em;">
        <i class="fas fa-map-marker-alt"></i>
    </div>
    <div style="flex: 1;">
    <div style="font-size: 0.7em; color: #999; text-transform: uppercase; letter-spacing: 0.5px;" 
         data-i18n-key="lbl_current_zone_area">‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</div>
    
    <div id="display-zone-name" style="font-weight: bold; color: var(--dark); font-size: 0.95em;" 
         data-i18n-key="lbl_finding_zone">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏ã‡∏ô...</div>
    
    <div style="font-size: 0.75em; color: #666; margin-top: 2px;">
        <i class="fas fa-user-shield" style="font-size: 0.9em; color: #f1c40f;"></i> 
        <span data-i18n-key="lbl_zone_owner">‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô:</span> 
        
        <span id="display-zone-admin" style="font-weight: bold; color: var(--primary);" 
              data-i18n-key="lbl_waiting_connect">‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</span>
    </div>
</div>
</div>



<div id="topup-request-modal" class="modal">
    <div class="modal-content" style="max-width: 320px; text-align: center;">
        <div style="font-size: 40px; color: #f1c40f; margin-bottom: 10px;"><i class="fas fa-hand-holding-usd"></i></div>
        <h3 style="margin: 0 0 10px;" data-i18n-key="title_request_topup">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h3>
        <p style="font-size: 0.8em; color: #666; margin-bottom: 15px;" data-i18n-key="desc_request_topup">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (USD) ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏°</p>
        
        <div style="position: relative; margin-bottom: 20px;">
            <input type="number" id="request-amount-input" placeholder="0.00" 
                   style="width: 100%; padding: 12px 15px; border: 2px solid #eee; border-radius: 12px; font-size: 1.5em; text-align: center; box-sizing: border-box; outline: none; font-weight: bold; color: #2c3e50;">
            <span style="position: absolute; right: 15px; top: 15px; font-weight: bold; color: #999;">USD</span>
        </div>

        <div style="display: flex; gap: 10px;">
            <button onclick="closeRequestTopup()" style="flex: 1; padding: 12px; background: #eee; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; color: #666;" data-i18n-key="btn_cancel_topup">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            <button onclick="submitTopupRequest()" style="flex: 1; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold;" data-i18n-key="btn_submit_topup">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠</button>
        </div>
    </div>
</div>

<div class="menu-list">
    <div id="kyc-menu-container">
        <div class="menu-item verify-btn" onclick="openKYC()">
            <i class="fas fa-id-card"></i>
            <div style="text-align: left; flex: 1;">
                <div style="font-weight: bold;" data-i18n-key="menu_kyc_title">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô (KYC)</div>
                <div style="font-size: 0.7em; color: #b58900;" data-i18n-key="menu_kyc_desc">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô</div>
            </div>
            <i class="fas fa-chevron-right" style="font-size: 0.8em; color: #ccc;"></i>
        </div>
    </div>
	

    <a href="#" class="menu-item" onclick="handleGoogleLinking(event)" style="cursor: pointer;">
    <i class="fab fa-google" style="color: #4285F4;"></i> 
    <span data-i18n-key="lbl_email_static">‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</span> 
    <span id="display-email" style="margin-left:5px; color:#11998e; font-weight: bold;" data-i18n-key="lbl_not_specified">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏</span>
    <i class="fas fa-link" id="link-icon" style="margin-left: auto; font-size: 0.8em; color: #ccc;"></i>
</a>

<div id="google-button-container" style="padding: 10px; display: none;">
    <div id="google-login-btn"></div>
    <p style="font-size: 0.75rem; color: #999; text-align: center; margin-top: 5px;">* Link Google Account</p>
</div>
    
	
    <a href="#" class="menu-item">
        <i class="fas fa-history"></i> 
        <span data-i18n-key="menu_history">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</span>
    </a>
    
    <a href="javascript:logout()" class="menu-item" style="color: var(--danger); border-color: #ffeaea;">
        <i class="fas fa-power-off"></i> 
        <span data-i18n-key="menu_logout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
    </a>
</div>

    </div>
</div>



<script>
	const socket = io();
	let currentZoneAdmin = null;
	let isKYCPending = false;
	let currentKYCRequestId = null;
	let currentZoneData = null;
	
	


const currentLang = localStorage.getItem('preferredLanguage') || 'th';
				
const translations = {
    'th': {
        'lbl_current_zone_area': '‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô',
        'lbl_finding_zone': '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏ã‡∏ô...',
        'lbl_zone_owner': '‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô:',
        'lbl_waiting_connect': '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠',
		'title_request_topup': '‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô',
        'desc_request_topup': '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (USD) ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏°',
        'btn_cancel_topup': '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',
        'btn_submit_topup': '‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠',
        'menu_kyc_title': '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô (KYC)',
        'menu_kyc_desc': '‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô',
        'lbl_email_static': '‡∏≠‡∏µ‡πÄ‡∏°‡∏•:',
        'lbl_not_specified': '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏',
        'menu_history': '‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°',
        'menu_logout': '‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö',
		'btn_submit_kyc': '‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô',
        'lbl_data_unavailable': '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô',
        'msg_kyc_pending_html': (name) => `‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà <b>${name}</b> ‡πÅ‡∏•‡πâ‡∏ß<br>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ô‡∏±‡∏î‡∏û‡∏ö`,
        'msg_kyc_approved_html': (name) => `‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÇ‡∏î‡∏¢ <b>${name}</b>`,
        'log_kyc_error': '‡πÄ‡∏ä‡πá‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ KYC ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:',
        'conf_logout': '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?',
        'lbl_file_selected': '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡πâ‡∏ß ‚úÖ',
        'btn_submit_checking_dist': '<i class="fas fa-lock"></i> ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á...)',
        'btn_submit_ready': '<i class="fas fa-paper-plane"></i> ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô',
		'btn_ready_to_send': '<i class="fas fa-check-circle"></i> ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö',
        'btn_incomplete_data': '<i class="fas fa-lock"></i> ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö',
        'swal_confirm_submit_title': '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•?',
        'swal_confirm_submit_text': '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö',
        'btn_check_again': '‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á',
        'swal_gps_not_support_title': '‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',
        'swal_gps_not_support_text': '‡∏ö‡∏£‡∏≤‡∏ß‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö GPS',
        'swal_checking_coords': '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î...',
		'default_admin_name': '‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÇ‡∏ã‡∏ô',
        'swal_no_admin_title': '‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà',
        'swal_no_admin_text': '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏∞‡∏ö‡∏∏‡πÇ‡∏ã‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠',
        'swal_send_success_title': '‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢',
        'swal_send_success_text': (name) => `‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á ${name} ‡πÅ‡∏•‡πâ‡∏ß`,
        'status_sent_to_admin_html': (name) => `‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á <b>${name}</b> ‡πÅ‡∏•‡πâ‡∏ß (‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ñ‡∏π‡∏Å‡πÅ‡∏ô‡∏ö‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠)`,
        'swal_gps_fail_title': '‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',
        'swal_gps_fail_text': '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î GPS',
		'kyc_status_pending': '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö',
        'kyc_sent_to_html': (name) => `‡∏™‡πà‡∏á‡∏ñ‡∏∂‡∏á: <b>${name}</b>`,
        'kyc_tap_details': '‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ',
        'kyc_badge_waiting': 'Waiting',
        'kyc_status_approved': '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢',
        'kyc_verified_by': (name) => `‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÇ‡∏î‡∏¢: ${name}`,
        'kyc_trusted_account': '‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡∏™‡∏π‡∏á',
		'swal_update_loc_success': '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ô‡∏±‡∏î‡∏û‡∏ö‡πÅ‡∏•‡πâ‡∏ß',
        'chat_loc_updated': 'üìç ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ô‡∏±‡∏î‡∏û‡∏ö‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß',
        'swal_gps_error_title': '‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',
        'swal_gps_error_text': '‡∏î‡∏∂‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î GPS',
		'nav_kyc': '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô (KYC)',
        'title_kyc_member': '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å',
        'desc_kyc_member': '‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö',
        'lbl_selfie_current': '‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:',
        'lbl_tap_to_photo': '‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ',
        'lbl_full_name_card': '‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• (‡∏ï‡∏≤‡∏°‡∏ö‡∏±‡∏ï‡∏£):',
        'plh_full_name': '‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•',
        'lbl_id_card_num': '‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô:',
        'plh_id_card': '‡πÄ‡∏•‡∏Ç 13 ‡∏´‡∏•‡∏±‡∏Å',
        'lbl_phone_num': '‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:',
        'plh_phone': '08x-xxx-xxxx',
        'lbl_current_address': '‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:',
        'plh_address': '‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...',
        'lbl_proximity_rule': '‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç: ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 20 ‡πÄ‡∏°‡∏ï‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥',
        'btn_submit_kyc_init': '‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö',
		'title_submit_success': '‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß',
        'title_review_details': '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:',
        'lbl_sum_name': '‡∏ä‡∏∑‡πà‡∏≠:',
        'lbl_sum_id': '‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£:',
        'lbl_sum_phone': '‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:',
        'lbl_sum_address': '‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:',
        'lbl_chat_with_admin': '‡πÅ‡∏ä‡∏ó‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô',
        'msg_start_appointment': '‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô',
        'btn_update_location': '‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô',
        'plh_type_message': '‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°...',
        'lbl_next_step_title': '‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ:',
        'lbl_next_step_desc': '‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏ä‡∏ó‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏∏‡∏î‡∏ô‡∏±‡∏î‡∏û‡∏ö‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞ 20 ‡πÄ‡∏°‡∏ï‡∏£',
        'btn_close_window': '‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ',
		'lbl_kyc_fee': '‡∏Ñ‡πà‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô:',
        'err_insufficient_kyc': '‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô',
        'swal_deduct_notice': '‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏´‡∏±‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡πÇ‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
    },
    'en': {
        'lbl_current_zone_area': 'Current Operating Area',
        'lbl_finding_zone': 'Finding zone...',
        'lbl_zone_owner': 'Zone Owner:',
        'lbl_waiting_connect': 'Waiting for connection',
		'title_request_topup': 'Top-up Request',
        'desc_request_topup': 'Please enter the amount (USD) you wish to top-up',
        'btn_cancel_topup': 'Cancel',
        'btn_submit_topup': 'Submit',
        'menu_kyc_title': 'Identity Verification (KYC)',
        'menu_kyc_desc': 'Upload documents to accept higher value jobs',
        'lbl_email_static': 'Email:',
        'lbl_not_specified': 'Not specified',
        'menu_history': 'Transaction History',
        'menu_logout': 'Log Out',
		'btn_submit_kyc': 'Submit Verification Data',
        'lbl_data_unavailable': 'Data Unavailable',
        'msg_kyc_pending_html': (name) => `Your request has been sent to <b>${name}</b>.<br>Please wait for admin response to schedule an appointment.`,
        'msg_kyc_approved_html': (name) => `Identity verified by <b>${name}</b>`,
        'log_kyc_error': 'Failed to check KYC status:',
        'conf_logout': 'Confirm Log Out?',
        'lbl_file_selected': 'File Selected ‚úÖ',
        'btn_submit_checking_dist': '<i class="fas fa-lock"></i> Submit (Checking Distance...)',
        'btn_submit_ready': '<i class="fas fa-paper-plane"></i> Submit Verification Data',
		'btn_ready_to_send': '<i class="fas fa-check-circle"></i> Submit for Review',
        'btn_incomplete_data': '<i class="fas fa-lock"></i> Please complete all fields',
        'swal_confirm_submit_title': 'Confirm Submission?',
        'swal_confirm_submit_text': 'Your current location data will be sent to the admin for verification',
        'btn_check_again': 'Check Again',
        'swal_gps_not_support_title': 'Error',
        'swal_gps_not_support_text': 'Browser does not support GPS',
        'swal_checking_coords': 'Checking coordinates...',
		'default_admin_name': 'Zone Admin',
        'swal_no_admin_title': 'Admin Not Found',
        'swal_no_admin_text': 'Please wait for the system to identify your zone before submitting.',
        'swal_send_success_title': 'Data Sent',
        'swal_send_success_text': (name) => `Your request and coordinates have been sent to ${name}`,
        'status_sent_to_admin_html': (name) => `Sent to <b>${name}</b> (Coordinates attached)`,
        'swal_gps_fail_title': 'GPS Error',
        'swal_gps_fail_text': 'Unable to fetch location. Please enable GPS.',
		'kyc_status_pending': 'Verification Pending',
        'kyc_sent_to_html': (name) => `Sent to: <b>${name}</b>`,
        'kyc_tap_details': 'Tap to view submitted details',
        'kyc_badge_waiting': 'Waiting',
        'kyc_status_approved': 'Identity Verified',
        'kyc_verified_by': (name) => `Verified by: ${name}`,
        'kyc_trusted_account': 'Your account is highly trusted',
		'swal_update_loc_success': 'Meeting coordinates updated',
        'chat_loc_updated': 'üìç New meeting coordinates updated',
        'swal_gps_error_title': 'Error',
        'swal_gps_error_text': 'Unable to fetch coordinates. Please enable GPS',
		'nav_kyc': 'Identity Verification (KYC)',
        'title_kyc_member': 'Member Verification',
        'desc_kyc_member': 'Upload your data for zone admin review',
        'lbl_selfie_current': 'Current Selfie Photo:',
        'lbl_tap_to_photo': 'Tap to take a photo',
        'lbl_full_name_card': 'Full Name (as per ID):',
        'plh_full_name': 'First and Last Name',
        'lbl_id_card_num': 'ID Card Number:',
        'plh_id_card': 'Enter ID / Passport Number',
        'lbl_phone_num': 'Phone Number:',
        'plh_phone': 'Phone number',
        'lbl_current_address': 'Current Address:',
        'plh_address': 'Detailed address...',
        'lbl_proximity_rule': 'Condition: Must be within 20m of admin to approve',
        'btn_submit_kyc_init': 'Submit for Review',
		'title_submit_success': 'Submission Successful',
        'title_review_details': 'Submission Details:',
        'lbl_sum_name': 'Name:',
        'lbl_sum_id': 'ID Number:',
        'lbl_sum_phone': 'Phone:',
        'lbl_sum_address': 'Address:',
        'lbl_chat_with_admin': 'Chat with Admin',
        'msg_start_appointment': 'Send a message to schedule an appointment',
        'btn_update_location': 'Update location when near admin',
        'plh_type_message': 'Type a message...',
        'lbl_next_step_title': 'Next Step:',
        'lbl_next_step_desc': 'Wait for admin response to confirm meeting point within 20m',
        'btn_close_window': 'Close Window',
		'lbl_kyc_fee': 'KYC Verification Fee:',
        'err_insufficient_kyc': 'Insufficient balance for KYC verification',
        'swal_deduct_notice': 'The fee will be deducted immediately and transferred to the zone owner upon approval.',
    },
    'pt': {
        'lbl_current_zone_area': '√Årea de Opera√ß√£o Atual',
        'lbl_finding_zone': 'Procurando zona...',
        'lbl_zone_owner': 'Dono da Zona:',
        'lbl_waiting_connect': 'Aguardando conex√£o',
		'title_request_topup': 'Solicitar Recarga',
        'desc_request_topup': 'Insira o valor (USD) que deseja recarregar',
        'btn_cancel_topup': 'Cancelar',
        'btn_submit_topup': 'Enviar',
        'menu_kyc_title': 'Verifica√ß√£o de Identidade (KYC)',
        'menu_kyc_desc': 'Envie documentos para aceitar trabalhos de maior valor',
        'lbl_email_static': 'E-mail:',
        'lbl_not_specified': 'N√£o especificado',
        'menu_history': 'Hist√≥rico de Transa√ß√µes',
        'menu_logout': 'Sair',
		'btn_submit_kyc': 'Enviar Dados de Verifica√ß√£o',
        'lbl_data_unavailable': 'Dados Indispon√≠veis',
        'msg_kyc_pending_html': (name) => `Seu pedido foi enviado para <b>${name}</b>.<br>Aguarde a resposta do administrador para agendar o encontro.`,
        'msg_kyc_approved_html': (name) => `Identidade verificada por <b>${name}</b>`,
        'log_kyc_error': 'Falha ao verificar status do KYC:',
        'conf_logout': 'Confirmar encerramento de sess√£o?',
        'lbl_file_selected': 'Arquivo Selecionado ‚úÖ',
        'btn_submit_checking_dist': '<i class="fas fa-lock"></i> Enviar (Verificando Dist√¢ncia...)',
        'btn_submit_ready': '<i class="fas fa-paper-plane"></i> Enviar Dados de Verifica√ß√£o',
		'btn_ready_to_send': '<i class="fas fa-check-circle"></i> Enviar para Revis√£o',
        'btn_incomplete_data': '<i class="fas fa-lock"></i> Por favor, preencha todos os campos',
        'swal_confirm_submit_title': 'Confirmar Envio?',
        'swal_confirm_submit_text': 'Seus dados de localiza√ß√£o atual ser√£o enviados ao administrador para verifica√ß√£o',
        'btn_check_again': 'Verificar Novamente',
        'swal_gps_not_support_title': 'Erro',
        'swal_gps_not_support_text': 'O navegador n√£o suporta GPS',
        'swal_checking_coords': 'Verificando coordenadas...',
		'default_admin_name': 'Admin da Zona',
        'swal_no_admin_title': 'Admin n√£o encontrado',
        'swal_no_admin_text': 'Aguarde o sistema identificar sua zona antes de enviar.',
        'swal_send_success_title': 'Dados enviados',
        'swal_send_success_text': (name) => `Seu pedido e coordenadas foram enviados para ${name}`,
        'status_sent_to_admin_html': (name) => `Enviado para <b>${name}</b> (Coordenadas anexadas)`,
        'swal_gps_fail_title': 'Erro de GPS',
        'swal_gps_fail_text': 'N√£o foi poss√≠vel obter a localiza√ß√£o. Ative o GPS.',
		'kyc_status_pending': 'Verifica√ß√£o Pendente',
        'kyc_sent_to_html': (name) => `Enviado para: <b>${name}</b>`,
        'kyc_tap_details': 'Toque para ver detalhes enviados',
        'kyc_badge_waiting': 'Aguardando',
        'kyc_status_approved': 'Identidade Verificada',
        'kyc_verified_by': (name) => `Verificado por: ${name}`,
        'kyc_trusted_account': 'Sua conta √© altamente confi√°vel',
		'swal_update_loc_success': 'Coordenadas de encontro atualizadas',
        'chat_loc_updated': 'üìç Novas coordenadas de encontro atualizadas',
        'swal_gps_error_title': 'Erro',
        'swal_gps_error_text': 'N√£o foi poss√≠vel obter as coordenadas. Ative o GPS',
		'nav_kyc': 'Verifica√ß√£o de Identidade (KYC)',
        'title_kyc_member': 'Verifica√ß√£o de Membro',
        'desc_kyc_member': 'Envie seus dados para revis√£o do administrador',
        'lbl_selfie_current': 'Foto Selfie Atual:',
        'lbl_tap_to_photo': 'Toque para tirar foto',
        'lbl_full_name_card': 'Nome Completo (conforme documento):',
        'plh_full_name': 'Nome e Sobrenome',
        'lbl_id_card_num': 'N√∫mero do Documento:',
        'plh_id_card': 'Digite o CPF / Documento',
        'lbl_phone_num': 'N√∫mero de Telefone:',
        'plh_phone': 'Telefone',
        'lbl_current_address': 'Endere√ßo Atual:',
        'plh_address': 'Endere√ßo detalhado...',
        'lbl_proximity_rule': 'Condi√ß√£o: Deve estar a menos de 20m do admin',
        'btn_submit_kyc_init': 'Enviar para Revis√£o',
		'title_submit_success': 'Enviado com Sucesso',
        'title_review_details': 'Detalhes do Envio:',
        'lbl_sum_name': 'Nome:',
        'lbl_sum_id': 'Documento:',
        'lbl_sum_phone': 'Telefone:',
        'lbl_sum_address': 'Endere√ßo:',
        'lbl_chat_with_admin': 'Chat com Administrador',
        'msg_start_appointment': 'Envie uma mensagem para agendar o encontro',
        'btn_update_location': 'Atualizar local quando estiver perto do admin',
        'plh_type_message': 'Digite uma mensagem...',
        'lbl_next_step_title': 'Pr√≥ximo Passo:',
        'lbl_next_step_desc': 'Aguarde o admin responder para confirmar o encontro em at√© 20m',
        'btn_close_window': 'Fechar Janela',
		'lbl_kyc_fee': 'Taxa de verifica√ß√£o KYC:',
        'err_insufficient_kyc': 'Saldo insuficiente para verifica√ß√£o KYC',
        'swal_deduct_notice': 'A taxa ser√° deduzida imediatamente e transferida para o propriet√°rio da zona ap√≥s a aprova√ß√£o.',
    }
};

function applyMerchantTranslations() {
    console.log(`[i18n] Applying translations for: ${currentLang}`);
    document.querySelectorAll('[data-i18n-key]').forEach(el => {
        const key = el.getAttribute('data-i18n-key');
        const translatedText = translations[currentLang]?.[key];

        if (translatedText) {
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                el.placeholder = translatedText;
            } 
            else {
                const icon = el.querySelector('i');
                if (icon) {
                    el.innerHTML = '';
                    el.appendChild(icon);
                    el.insertAdjacentHTML('beforeend', ' ' + translatedText);
                } else {
                    el.innerText = translatedText;
                }
            }
        }
    });
}

// ‡∏™‡∏±‡πà‡∏á‡∏£‡∏±‡∏ô‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
window.addEventListener('DOMContentLoaded', () => {
    applyMerchantTranslations();
});



	
	function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    
    sidebar.classList.toggle('active');
    overlay.classList.toggle('active');
}

    function closeKYC() { document.getElementById('kyc-modal').style.display = 'none'; }

    // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏à‡∏∞‡πÉ‡∏ä‡πâ Geolocation API)
    function checkProximity() {
        const isNear = false; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô true ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ 20m
        const btn = document.getElementById('btn-kyc-submit');
        if(isNear) {
            btn.disabled = false;
            btn.classList.add('btn-active');
            btn.innerText = translations[currentLang].btn_submit_kyc;
        }
    }

    window.onload = async () => {
    const myName = localStorage.getItem('myUsername');
    if (!myName) {
        window.location.href = 'index.html';
        return;
    }

    document.getElementById('display-name').innerText = myName;

    try {
        const savedLoc = localStorage.getItem('userPrimaryLocation');
        let locationParam = '';
        if (savedLoc) locationParam = `&location=${encodeURIComponent(savedLoc)}`;

        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á
        const res = await fetch(`/api/profile-details?username=${myName}${locationParam}`);
        const data = await res.json();

        if (data.error) throw new Error(data.error);

        // 1. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ (‡πÉ‡∏ä‡πâ || 0 ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Error .toFixed)
        document.getElementById('count-post').innerText = data.totalPosts || 0;
        document.getElementById('count-job').innerText = data.completedJobs || 0;
		document.getElementById('count-rating').innerText = data.rating || 0;
        
        // ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà API ‡∏™‡πà‡∏á‡∏°‡∏≤ (BRL, THB, USD)
        const balance = data.coins || 0;
        const currency = data.currency || 'USD';
        
        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
        const balanceElem = document.getElementById('display-balance-usd');
        if (balanceElem) {
            balanceElem.innerText = `${balance.toFixed(2)} ${currency}`;
        }
        
        // 2. ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏ã‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô
        document.getElementById('display-zone-name').innerText = data.zoneName;
        document.getElementById('display-zone-admin').innerText = data.zoneOwner;

        // 3. ‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•
        document.getElementById('display-email').innerText = data.email;

    } catch (err) {
        console.error("Load Profile Error:", err);
        document.getElementById('display-zone-name').innerText = translations[currentLang].lbl_data_unavailable;
    }

    checkProximity();
	
	// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
async function checkKYCStatusFromServer() {
    const myName = localStorage.getItem('myUsername');
    if (!myName) return;

    try {
        const res = await fetch(`/api/kyc/my-status?username=${myName}`);
        const data = await res.json();

        if (data.status === 'pending' || data.status === 'approved') {
            // 1. ‡∏ô‡∏≥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Server ‡∏°‡∏≤‡πÉ‡∏™‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Summary
            document.getElementById('sum-name').innerText = data.details.fullName;
            document.getElementById('sum-id').innerText = data.details.idNumber;
            document.getElementById('sum-phone').innerText = data.details.phone;
            document.getElementById('sum-address').innerText = data.details.address;
            
            if (data.details.userImg) {
                document.getElementById('summary-img-preview').style.backgroundImage = `url(${data.details.userImg})`;
            }

            document.getElementById('admin-status-text').innerHTML = 
					data.status === 'pending' 
					? translations[currentLang].msg_kyc_pending_html(data.adminName)
					: translations[currentLang].msg_kyc_approved_html(data.adminName);

            updateKYCMenuUI(data.status, data.adminName);
            
            localStorage.setItem('kyc_status', data.status);
            
            socket.emit('joinRequest', myName);
        } else {
            localStorage.removeItem('kyc_status');
            updateKYCMenuUI('normal'); 
        }
    } catch (err) {
        console.error(translations[currentLang].log_kyc_error, err);
    }
}
checkKYCStatusFromServer();
};


    function logout() {
        if(confirm(translations[currentLang].conf_logout)) {
            localStorage.clear();
            window.location.href = 'index.html';
        }
    }
	
	
	// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏û‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ (‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ)
function previewImg(input) {
    if (input.files && input.files[0]) {
        const box = input.parentElement;
        box.style.borderColor = "#11998e";
        box.style.background = "#e8f5e9";
        box.querySelector('i').style.color = "#11998e";
        box.querySelector('p').innerText = translations[currentLang].lbl_file_selected;
    }
}

// ‡∏Ç‡∏¢‡∏≤‡∏¢ Logic ‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (‡∏à‡∏≥‡∏•‡∏≠‡∏á)
function updateKycStatus(isNear) {
    const btn = document.getElementById('btn-kyc-submit');
    if(isNear) {
        btn.disabled = false;
        btn.classList.add('btn-active');
        btn.innerHTML = translations[currentLang].btn_submit_ready;
    } else {
        btn.disabled = true;
        btn.classList.remove('btn-active');
        btn.innerHTML = translations[currentLang].btn_submit_checking_dist;
    }
}




// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏¥‡∏î Modal
function closeRequestTopup() {
    document.getElementById('topup-request-modal').style.display = 'none';
    document.getElementById('request-amount-input').value = '';
}


//‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô
// üö© ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ async ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö
async function openKYC() {
    const modal = document.getElementById('kyc-modal');
    const formView = document.getElementById('kyc-form-view');
    const summaryView = document.getElementById('kyc-summary-view');
    const feeElement = document.getElementById('kyc-fee-display');
    const currentLang = localStorage.getItem('preferredLanguage') || 'th';
    const myName = localStorage.getItem('myUsername');

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
    const status = localStorage.getItem('kyc_status');

    if (status === 'pending' || status === 'approved') {
        formView.style.display = 'none';
        summaryView.style.display = 'block';
        loadKYCUserChatHistory(myName);
    } else {
        formView.style.display = 'block';
        summaryView.style.display = 'none';

        // üö© ‡πÇ‡∏ä‡∏ß‡πå Loading ‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        if (feeElement) feeElement.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading...';

        try {
            // üö© ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö window.onload ‡πÄ‡∏õ‡πä‡∏∞‡πÜ
            const savedLoc = localStorage.getItem('userPrimaryLocation');
            let locationParam = '';
            if (savedLoc) locationParam = `&location=${encodeURIComponent(savedLoc)}`;

            const res = await fetch(`/api/profile-details?username=${myName}${locationParam}`);
            const data = await res.json();

            if (data.error) throw new Error(data.error);

            // üö© ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤ kycPrice ‡πÅ‡∏•‡∏∞ currency ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å API
            const kycPrice = data.kycPrice || 0;
            const currency = data.currency || 'USD';

            // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
            if (feeElement) {
                const label = translations[currentLang].lbl_kyc_fee || '‡∏Ñ‡πà‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô:';
                feeElement.innerHTML = `${label} <b>${kycPrice.toLocaleString()} ${currency}</b>`;
            }

            // ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏™‡πà window ‡πÑ‡∏ß‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏ô submitKYC
            window.currentKYCFee = kycPrice;
            window.currentKYCCurrency = currency;
            window.userCurrentBalance = data.coins || 0; // ‡πÄ‡∏Å‡πá‡∏ö‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á

        } catch (err) {
            console.error("KYC Load Error:", err);
            if (feeElement) feeElement.innerText = "Error loading fee";
        }
    }

    modal.style.display = 'block';
}

function closeKYC() {
    document.getElementById('kyc-modal').style.display = 'none';
}

function previewKYCImg(input) {
    const container = document.getElementById('preview-container');
    const text = document.getElementById('upload-text');
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            container.style.backgroundImage = `url(${e.target.result})`;
            container.style.backgroundSize = 'cover';
            container.style.backgroundPosition = 'center';
            text.style.display = 'none';
            container.querySelector('i').style.display = 'none';
            validateKYC();
        };
        reader.readAsDataURL(input.files[0]);
    }
}



function validateKYC() {
    const name = document.getElementById('full-name').value;
    const idNum = document.getElementById('id-number').value;
    const phone = document.getElementById('phone-number').value;
    const address = document.getElementById('home-address').value;
    const file = document.getElementById('kyc-file').files.length;
    const btn = document.getElementById('btn-kyc-submit');

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
    if (name.trim() !== "" && idNum.length === 13 && phone.length >= 10 && address.trim() !== "" && file > 0) {
        btn.disabled = false;
        btn.innerHTML = translations[currentLang].btn_ready_to_send;
    } else {
        btn.disabled = true;
        btn.innerHTML = translations[currentLang].btn_incomplete_data;
    }
}

async function submitKYC() {
    // üö© 1. ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏†‡∏≤‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏° (‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å window ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏∞‡∏ä‡∏±‡∏ß‡∏£‡πå‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)
    const currentLang = localStorage.getItem('preferredLanguage') || 'th';
    
    // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å currentZoneData)
    const kycPrice = window.currentKYCFee || (typeof currentZoneData !== 'undefined' ? currentZoneData.kycPrice : 0) || 0;
    const currency = window.currentKYCCurrency || (typeof currentZoneData !== 'undefined' ? currentZoneData.zoneCurrency : 'USD') || 'USD';
    
    // ‡∏î‡∏∂‡∏á‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å window.userCurrentBalance ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå)
    const userBalance = window.userCurrentBalance || 0;

    // --- üõ°Ô∏è ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ ---
    if (userBalance < kycPrice) {
        return Swal.fire({
            icon: 'error',
            title: translations[currentLang].swal_error_title,
            text: `${translations[currentLang].err_insufficient_kyc} (${kycPrice} ${currency})`,
            confirmButtonColor: '#e74c3c'
        });
    }

    // üö© 2. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏±‡∏Å‡πÄ‡∏á‡∏¥‡∏ô
    const confirm = await Swal.fire({
        title: translations[currentLang].swal_confirm_submit_title,
        text: `${translations[currentLang].swal_deduct_notice} (${kycPrice} ${currency})`,
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#11998e',
        confirmButtonText: translations[currentLang].btn_submit_topup,
        cancelButtonText: translations[currentLang].btn_check_again
    });

    if (confirm.isConfirmed) {
        if (!navigator.geolocation) {
            return Swal.fire(
                translations[currentLang].swal_gps_not_support_title, 
                translations[currentLang].swal_gps_not_support_text, 
                'error'
            );
        }

        Swal.fire({
            title: translations[currentLang].swal_checking_coords,
            allowOutsideClick: false,
            didOpen: () => { Swal.showLoading(); }
        });

        navigator.geolocation.getCurrentPosition(async (position) => {
            const userCoords = {
                lat: position.coords.latitude,
                lng: position.coords.longitude
            };

            // 3. ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 
            const name = document.getElementById('full-name').value;
            const idNum = document.getElementById('id-number').value;
            const phone = document.getElementById('phone-number').value;
            const address = document.getElementById('home-address').value;
            
            const imgContainer = document.getElementById('preview-container');
            let userImgData = "";
            
            if (imgContainer && imgContainer.style.backgroundImage) {
                const rawBase64 = imgContainer.style.backgroundImage.slice(5, -2);
                Swal.update({ title: 'Resizing the image...' });
                userImgData = await resizeImage(rawBase64, 800, 0.6); 
            }
            
            const adminNameElement = document.getElementById('display-zone-admin');
            let adminName = adminNameElement ? adminNameElement.innerText : translations[currentLang].default_admin_name;

            if (adminName === "Waiting for connection." || adminName === "Searching for zone...") {
                return Swal.fire({
                    icon: 'warning',
                    title: translations[currentLang].swal_no_admin_title,
                    text: translations[currentLang].swal_no_admin_text,
                    confirmButtonColor: '#11998e'
                });
            }

            // 4. ‡∏™‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô Socket (‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡πÅ‡∏•‡∏∞‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô)
            socket.emit('submit-kyc', {
                username: localStorage.getItem('myUsername'),
                fullName: name,
                idNumber: idNum,
                phone: phone,
                address: address,
                coords: userCoords,
                adminName: adminName,
                userImg: userImgData,
                kycFee: kycPrice, // ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                currency: currency // ‡∏™‡πà‡∏á‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô
            });

            // 5. ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡∏∞‡∏™‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ (‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°)
            Swal.fire({
                icon: 'success',
                title: translations[currentLang].swal_send_success_title,
                text: translations[currentLang].swal_send_success_text(adminName),
                confirmButtonColor: '#11998e'
            }).then(() => {
                localStorage.setItem('kyc_status', 'pending');
                localStorage.setItem('kyc_admin', adminName);
                localStorage.setItem('kyc_name', name);
                localStorage.setItem('kyc_id', idNum);
                localStorage.setItem('kyc_phone', phone);
                localStorage.setItem('kyc_address', address);
                localStorage.setItem('kyc_img', userImgData);
                document.getElementById('kyc-form-view').style.display = 'none';
                document.getElementById('kyc-summary-view').style.display = 'block';
                
                const myName = localStorage.getItem('myUsername');
                currentKYCRequestId = myName; 
                socket.emit('joinRequest', myName); 
                loadKYCUserChatHistory(myName);    

                document.getElementById('sum-name').innerText = name;
                document.getElementById('sum-id').innerText = idNum; 
                document.getElementById('sum-phone').innerText = phone;
                document.getElementById('sum-address').innerText = address; 
                document.getElementById('summary-img-preview').style.backgroundImage = `url(${userImgData})`;
                document.getElementById('admin-status-text').innerHTML = translations[currentLang].status_sent_to_admin_html(adminName);
                
                updateKYCMenuUI('pending', adminName);
            });

        }, (err) => {
            Swal.fire(
                translations[currentLang].swal_gps_fail_title, 
                translations[currentLang].swal_gps_fail_text, 
                'error');
        });
    }
}


// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏¢‡πà‡∏≠‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
async function resizeImage(base64Str, maxWidth = 800, quality = 0.7) {
    return new Promise((resolve) => {
        const img = new Image();
        img.src = base64Str;
        img.onload = () => {
            const canvas = document.createElement('canvas');
            let width = img.width;
            let height = img.height;

            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô maxWidth
            if (width > maxWidth) {
                height = (maxWidth / width) * height;
                width = maxWidth;
            }

            canvas.width = width;
            canvas.height = height;

            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0, width, height);

            // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô Base64 ‡πÅ‡∏ö‡∏ö JPEG ‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (0.0 - 1.0)
            const compressedBase64 = canvas.toDataURL('image/jpeg', quality);
            resolve(compressedBase64);
        };
    });
}






function previewKYCImg(input) {
    const container = document.getElementById('preview-container');
    const placeholder = document.getElementById('upload-placeholder');
    
    if (input.files && input.files[0]) {
        const reader = new FileReader();
        
        reader.onload = function(e) {
            // ‡πÉ‡∏ä‡πâ backgroundImage ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ Crop ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏£‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° (Object-fit: cover)
            container.style.backgroundImage = `url('${e.target.result}')`;
            container.style.backgroundSize = 'cover';
            container.style.backgroundPosition = 'center';
            container.style.border = '2px solid var(--primary)'; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏Å‡∏£‡∏≠‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏£‡∏π‡∏õ
            
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô placeholder
            placeholder.style.display = 'none';
            
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏∏‡πà‡∏° submit
            validateKYC();
        };
        
        reader.readAsDataURL(input.files[0]);
    }
}


// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡πÄ‡∏°‡∏ô‡∏π KYC ‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
function updateKYCMenuUI(status, adminName = "") {
    const currentLang = localStorage.getItem('preferredLanguage') || 'th';
    const container = document.getElementById('kyc-menu-container');
    if (!container) return;

    if (status === 'pending') {
        container.innerHTML = `
            <div class="menu-item" onclick="openKYC()" style="background: #fff8e1; border-color: #ffe082; display: flex; align-items: center; gap: 12px; padding: 15px; border-radius: 12px; border: 1px solid #ffe082; margin-bottom: 10px;">
                <div style="background: #f39c12; color: white; width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.2em;">
                    <i class="fas fa-clock"></i>
                </div>
                <div style="text-align: left; flex: 1;">
                    <div style="font-weight: bold; color: #af8600;">${translations[currentLang].kyc_status_pending}</div>
                    <div style="font-size: 0.75em; color: #666;">${translations[currentLang].kyc_sent_to_html(adminName)}</div>
                    <div style="font-size: 0.7em; color: #999;">${translations[currentLang].kyc_tap_details}</div>
                </div>
                <span style="font-size: 0.65em; background: #f39c12; color: white; padding: 2px 8px; border-radius: 10px; font-weight: bold;">${translations[currentLang].kyc_badge_waiting}</span>
            </div>
        `;
    } else if (status === 'approved') {
        container.innerHTML = `
            <div class="menu-item" onclick="openKYC()" style="background: #e8f5e9; border-color: #c8e6c9; display: flex; align-items: center; gap: 12px; padding: 15px; border-radius: 12px; border: 1px solid #c8e6c9; margin-bottom: 10px;">
                <div style="background: #2e7d32; color: white; width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.2em;">
                    <i class="fas fa-check-double"></i>
                </div>
                <div style="text-align: left; flex: 1;">
                    <div style="font-weight: bold; color: #2e7d32;">${translations[currentLang].kyc_status_approved}</div>
                    <div style="font-size: 0.75em; color: #4caf50;">${translations[currentLang].kyc_verified_by(adminName)}</div>
                    <div style="font-size: 0.7em; color: #666;">${translations[currentLang].kyc_trusted_account}</div>
                </div>
                <i class="fas fa-shield-alt" style="color: #2e7d32; font-size: 1.2em;"></i>
            </div>
        `;
    }
}




//‡πÅ‡∏ä‡∏ó KYC
function sendKYCUserMessage() {
    const input = document.getElementById('kyc-user-input');
    const message = input.value.trim();
    const myName = localStorage.getItem('myUsername');
    
    if (!message || !myName) return;

    const chatData = {
        requestId: myName,
        sender: myName,
        message: message,
        type: 'text',
        category: 'kyc'
    };

    socket.emit('sendMessage', chatData);
    appendKYCUserChatMessage(chatData);
    input.value = '';
}

async function loadKYCUserChatHistory(requestId) {
    const chatBox = document.getElementById('kyc-user-chat-box');
    try {
        const res = await fetch(`/api/kyc/chat-history?requestId=${requestId}`);
        const history = await res.json();
        chatBox.innerHTML = '';
        if (Array.isArray(history)) {
            history.forEach(msg => appendKYCUserChatMessage(msg));
        }
    } catch (err) {
        console.warn("There is no chat history yet KYC");
    }
}

// 4. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
function appendKYCUserChatMessage(msg) {
    const chatBox = document.getElementById('kyc-user-chat-box');
    if (!chatBox) return;

    const myName = localStorage.getItem('myUsername');
    const isMe = msg.sender === myName;
    
    const msgHTML = `
        <div style="display: flex; flex-direction: column; align-items: ${isMe ? 'flex-end' : 'flex-start'}; margin-bottom: 5px;">
            <div style="background: ${isMe ? 'var(--primary)' : '#f1f5f9'}; 
                        color: ${isMe ? 'white' : 'var(--dark)'}; 
                        padding: 8px 12px; border-radius: 12px; 
                        max-width: 85%; font-size: 0.85em;
                        box-shadow: 0 1px 2px rgba(0,0,0,0.05);
                        border: ${isMe ? 'none' : '1px solid #e2e8f0'};">
                ${msg.message}
            </div>
            <small style="font-size: 0.6em; color: #94a3b8; margin-top: 2px;">
                ${isMe ? 'You' : 'Admin'}
            </small>
        </div>
    `;
    chatBox.innerHTML += msgHTML;
    chatBox.scrollTop = chatBox.scrollHeight;
}

// 5. ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Real-time
socket.on('receiveMessage', (msg) => {
    const myName = localStorage.getItem('myUsername');
    if (msg.requestId === myName && msg.sender !== myName) {
        appendKYCUserChatMessage(msg);
    }
});


function updateCurrentLocation() {
    const myName = localStorage.getItem('myUsername');
    
    Swal.fire({ title: 'Updating location...', allowOutsideClick: false, didOpen: () => Swal.showLoading() });

    navigator.geolocation.getCurrentPosition((pos) => {
        const newCoords = {
            lat: pos.coords.latitude,
            lng: pos.coords.longitude
        };

        // ‡∏™‡πà‡∏á Socket ‡πÑ‡∏õ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏µ‡πà‡∏ù‡∏±‡πà‡∏á Server ‡πÅ‡∏•‡∏∞ Admin
        socket.emit('update-kyc-location', {
            username: myName,
            coords: newCoords
        });

        Swal.fire({ 
				icon: 'success', 
				title: translations[currentLang].swal_update_loc_success, 
				timer: 1500, 
				showConfirmButton: false 
			});
        
        // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡πà‡∏≤‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß
        sendKYCUserMessage(translations[currentLang].chat_loc_updated);
        
    }, (err) => {
        Swal.fire(
			translations[currentLang].swal_gps_error_title, 
			translations[currentLang].swal_gps_error_text, 
			'error');
    });
}



function handleGoogleLinking(e) {
    if (e) e.preventDefault();
    
    const currentEmail = document.getElementById('display-email').innerText;
    if (currentEmail !== "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏" && currentEmail !== "Not specified") {
        return Swal.fire(':', 'This account has been successfully linked.', 'info');
    }

    // ‡πÅ‡∏™‡∏î‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°
    document.getElementById('google-button-container').style.display = 'block';

    google.accounts.id.initialize({
        client_id: "588474601862-hjtk1iu27cer2114si2947divbvd8v4c.apps.googleusercontent.com",
        callback: handleCredentialResponse,
        use_fedcm_for_prompt: true // üö© ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà Debug ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (FedCM)
    });

    // üö© ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ß‡∏≤‡∏î‡∏õ‡∏∏‡πà‡∏° Google ‡∏•‡∏á‡πÉ‡∏ô div ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ
    google.accounts.id.renderButton(
        document.getElementById("google-login-btn"),
        { 
            theme: "outline", 
            size: "large", 
            width: "100%",
            text: "signin_with", // ‡∏´‡∏£‡∏∑‡∏≠ "continue_with"
            shape: "rectangular"
        }
    );

    // ‡∏•‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å One Tap ‡∏î‡πâ‡∏ß‡∏¢
    google.accounts.id.prompt(); 
}

async function handleCredentialResponse(response) {
    const myUsername = localStorage.getItem('myUsername');
    
    Swal.fire({ title: 'Linking your Google account...', allowOutsideClick: false, didOpen: () => Swal.showLoading() });

    try {
        const res = await fetch('/api/auth/link-google', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
                username: myUsername,
                idToken: response.credential 
            })
        });

        const data = await res.json();

        if (data.success) {
            Swal.fire('success!', 'Google account successfully linked.', 'success');
            document.getElementById('display-email').innerText = data.email;
            document.getElementById('link-icon').style.color = '#11998e';
        } else {
            Swal.fire('error', data.error, 'error');
        }
    } catch (err) {
        Swal.fire('Error', 'Unable to connect to the server.', 'error');
    }
}


async function handleAvatarUpload(input) {
    if (input.files && input.files[0]) {
        const file = input.files[0];
        const username = localStorage.getItem('myUsername');
        const reader = new FileReader();
        reader.onload = async (e) => {
            const originalBase64 = e.target.result;
            const resizedBase64 = await resizeImage(originalBase64, 400, 0.7);
            document.getElementById('main-avatar-img').src = resizedBase64;

            Swal.fire({ title: 'Updating profile image...', allowOutsideClick: false, didOpen: () => Swal.showLoading() });

            // üö© 2. ‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå
            try {
                const res = await fetch('/api/user/update-avatar', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, image: resizedBase64 })
                });

                const data = await res.json();
                if (data.success) {
                    Swal.fire('success', 'profile image', 'success');
                }
            } catch (err) {
                Swal.fire('Error', 'Unable to connect to the server.', 'error');
            }
        };
        reader.readAsDataURL(file);
    }
}




</script>



<div class="sidebar-overlay" id="sidebar-overlay" onclick="toggleSidebar()"></div>

<nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <div style="font-size: 40px;">üë§</div>
        <div id="sidebar-user" style="font-weight:bold; margin-top:5px;">Guest</div>
        <small style="opacity:0.7;">Member GedGo!</small>
    </div>

    <div class="sidebar-menu">
        <div class="nav-item" onclick="openKYC()">
    <i class="fas fa-user-check"></i> <span data-i18n-key="nav_kyc">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô (KYC)</span>
</div>
        <div class="nav-item" onclick="switchView(2)">
            <i class="fas fa-id-card"></i> <span>‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 2</span>
        </div>
        <div class="nav-item" onclick="switchView(3)">
            <i class="fas fa-history"></i> <span>‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 3</span>
        </div>
        <div class="nav-item" onclick="switchView(4)">
            <i class="fas fa-cog"></i> <span>‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 4</span>
        </div>
    </div>

    <div style="padding: 20px; border-top: 1px solid #eee;">
        <div class="nav-item" onclick="logout()" style="color: var(--danger);">
            <i class="fas fa-sign-out-alt"></i> Log Out
        </div>
    </div>
</nav>




	<div id="kyc-modal" class="modal">
    <div class="modal-content" id="kyc-container">
        <div id="btn-close-x" onclick="closeKYC()" style="position: absolute; right: 20px; top: 20px; cursor: pointer; color: #999; font-size: 1.5em;">
            <i class="fas fa-times-circle"></i>
        </div>

        <div id="kyc-form-view">
    <div style="text-align: left; margin-bottom: 20px;">
        <h3 style="margin: 0; color: var(--dark); font-size: 1.5em;" data-i18n-key="title_kyc_member">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h3>
        <p style="font-size: 0.85em; color: #666; margin-top: 5px;" data-i18n-key="desc_kyc_member">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</p>
		<p id="kyc-fee-display" style="font-size: 0.85em; color: #666; margin-top: 5px;"></p>
    </div>

    <label style="font-size: 0.85em; font-weight: bold; display: block; text-align: left; margin-bottom: 8px;" data-i18n-key="lbl_selfie_current">‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</label>
    <div class="upload-grid" style="margin-bottom: 20px;">
        <div class="upload-box" id="preview-container" style="overflow: hidden; height: 180px; background-color: #f1f5f9; display: flex; align-items: center; justify-content: center; background-size: cover; background-position: center;">
            <div id="upload-placeholder">
                <i class="fas fa-camera" style="font-size: 2.5em; color: #64748b;"></i>
                <p style="color: #64748b; font-size: 0.9em;" data-i18n-key="lbl_tap_to_photo">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ</p>
            </div>
            <input type="file" id="kyc-file" accept="image/*" onchange="previewKYCImg(this)" style="position: absolute; width: 100%; height: 100%; opacity: 0;">
        </div>
    </div>

    <div style="text-align: left;">
        <label class="kyc-label" data-i18n-key="lbl_full_name_card">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• (‡∏ï‡∏≤‡∏°‡∏ö‡∏±‡∏ï‡∏£):</label>
        <input type="text" id="full-name" class="kyc-input" oninput="validateKYC()" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" data-i18n-key="plh_full_name">
        
        <label class="kyc-label" data-i18n-key="lbl_id_card_num">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô:</label>
        <input type="number" id="id-number" class="kyc-input" oninput="validateKYC()" placeholder="‡πÄ‡∏•‡∏Ç 13 ‡∏´‡∏•‡∏±‡∏Å" data-i18n-key="plh_id_card">
        
        <label class="kyc-label" data-i18n-key="lbl_phone_num">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</label>
        <input type="tel" id="phone-number" class="kyc-input" oninput="validateKYC()" placeholder="08x-xxx-xxxx" data-i18n-key="plh_phone">
        
        <label class="kyc-label" data-i18n-key="lbl_current_address">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</label>
        <textarea id="home-address" class="kyc-input" oninput="validateKYC()" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î..." style="height: 70px;" data-i18n-key="plh_address"></textarea>
    </div>

    <div id="proximity-info" class="proximity-alert">
        <i class="fas fa-map-marker-alt"></i> <span data-i18n-key="lbl_proximity_rule"><b>‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:</b> ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 20 ‡πÄ‡∏°‡∏ï‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span>
    </div>

    <button id="btn-kyc-submit" class="btn-submit" onclick="submitKYC()" disabled>
        <i class="fas fa-paper-plane"></i> <span data-i18n-key="btn_submit_kyc_init">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</span>
    </button>
</div>

        <div id="kyc-summary-view" style="display: none; text-align: left;">
    <div style="background: #e0f2f1; padding: 15px; border-radius: 15px; text-align: center; margin-bottom: 20px; border: 1px solid #4db6ac;">
        <i class="fas fa-check-circle" style="font-size: 3em; color: #00897b;"></i>
        <h3 style="margin: 10px 0 5px; color: #00695c;" data-i18n-key="title_submit_success">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß</h3>
        <p id="admin-status-text" style="margin: 0; font-size: 0.9em; color: #00695c;"></p>
    </div>

    <div style="border: 1px solid #eee; padding: 15px; border-radius: 12px; background: #fafafa;">
        <h4 style="margin: 0 0 15px; border-bottom: 1px solid #ddd; padding-bottom: 8px;" data-i18n-key="title_review_details">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:</h4>
        <div id="summary-img-preview" style="width: 100px; height: 100px; border-radius: 10px; background-size: cover; background-position: center; margin-bottom: 15px; border: 2px solid #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.1);"></div>
        
        <p style="margin: 5px 0;"><b data-i18n-key="lbl_sum_name">‡∏ä‡∏∑‡πà‡∏≠:</b> <span id="sum-name"></span></p>
        <p style="margin: 5px 0;"><b data-i18n-key="lbl_sum_id">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£:</b> <span id="sum-id"></span></p>
        <p style="margin: 5px 0;"><b data-i18n-key="lbl_sum_phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</b> <span id="sum-phone"></span></p>
        <p style="margin: 5px 0;"><b data-i18n-key="lbl_sum_address">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</b> <span id="sum-address" style="font-size: 0.9em;"></span></p>
    </div>

    <div style="background: white; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); margin-top: 20px; border: 1px solid #e2e8f0; overflow: hidden;">
        <div style="padding: 12px 15px; background: #f8fafc; border-bottom: 1px solid #eee; font-weight: bold; color: var(--dark); display: flex; align-items: center; gap: 8px; font-size: 0.9em;">
            <i class="fas fa-comments" style="color: var(--primary);"></i> 
            <span data-i18n-key="lbl_chat_with_admin">‡πÅ‡∏ä‡∏ó‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</span>
        </div>
        <div id="kyc-user-chat-box" style="height: 180px; overflow-y: auto; padding: 15px; background: #fff; display: flex; flex-direction: column; gap: 10px;">
            <div style="text-align: center; color: #94a3b8; font-size: 0.75em;" data-i18n-key="msg_start_appointment">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</div>
        </div>
        
        <div style="padding: 5px 10px; background: #fff;">
            <button onclick="updateCurrentLocation()" style="width: 100%; padding: 8px; border-radius: 8px; border: 1px dashed var(--primary); background: #e0f2f1; color: var(--primary); font-size: 0.8em; cursor: pointer;">
                <i class="fas fa-map-marker-alt"></i> 
                <span data-i18n-key="btn_update_location">‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</span>
            </button>
        </div>

        <div style="padding: 10px; background: #f8fafc; border-top: 1px solid #eee; display: flex; gap: 8px; align-items: center;">
            <input type="text" id="kyc-user-input" data-i18n-key="plh_type_message" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..." style="flex:1; padding: 10px; border: 1px solid #e2e8f0; border-radius: 8px; outline: none; font-size: 0.9em; font-family: 'Kanit', sans-serif;">
            <button onclick="sendKYCUserMessage()" style="background: var(--primary); color: white; border: none; width: 38px; height: 38px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-paper-plane" style="font-size: 0.9em;"></i>
            </button>
        </div>
    </div>

    <div class="proximity-alert" style="background: #fff3e0; border-color: #ffe082; color: #e65100; margin-top: 20px;">
        <i class="fas fa-bullhorn"></i> 
        <b data-i18n-key="lbl_next_step_title">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ:</b> 
        <span data-i18n-key="lbl_next_step_desc">‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏ä‡∏ó‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏∏‡∏î‡∏ô‡∏±‡∏î‡∏û‡∏ö‡πÉ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞ 20 ‡πÄ‡∏°‡∏ï‡∏£</span>
    </div>

    <button onclick="closeKYC()" style="width: 100%; padding: 15px; background: #ddd; border: none; border-radius: 12px; margin-top: 15px; cursor: pointer; font-weight: bold;" data-i18n-key="btn_close_window">
        ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ
    </button>
</div>
    </div>
</div>


</body>
</html>